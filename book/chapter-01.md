# ‡∏ö‡∏ó‡∏ó‡∏µ‡πà 1: ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á Functional Programming?

> "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÇ‡∏Ñ‡πâ‡∏î‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏á‡πà‡∏≤‡∏¢ ‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏á‡πà‡∏≤‡∏¢ ‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢"

---

## 1.1 ‡∏ö‡∏ó‡∏ô‡∏≥

‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏à‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÑ‡∏´‡∏°?

- üêõ **Bug ‡∏ó‡∏µ‡πà‡∏´‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏à‡∏≠** - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà‡∏´‡∏ô‡∏∂‡πà‡∏á ‡πÅ‡∏ï‡πà‡πÄ‡∏Å‡∏¥‡∏î bug ‡∏ó‡∏µ‡πà‡∏≠‡∏∑‡πà‡∏ô
- üîÑ **State ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡πÄ‡∏î‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ** - ‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏Ñ‡πà‡∏≤‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏à‡∏∏‡∏î
- üß™ **‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏¢‡∏≤‡∏Å** - ‡∏ï‡πâ‡∏≠‡∏á mock ‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á setup ‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô
- üèóÔ∏è **‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏£‡∏≤‡∏∞‡∏ö‡∏≤‡∏á** - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ô‡∏¥‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏±‡∏á
- üìö **‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡∏≠‡πà‡∏≤‡∏ô‡∏¢‡∏≤‡∏Å** - ‡∏ï‡πâ‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡πÇ‡∏ü‡∏•‡∏ß‡πå‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á

‡∏´‡∏≤‡∏Å‡∏Ñ‡∏∏‡∏ì‡∏û‡∏ö‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡∏ö‡πà‡∏≠‡∏¢‡πÜ **Functional Programming (FP)** ‡∏≠‡∏≤‡∏à‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏°‡∏≠‡∏á‡∏´‡∏≤!

---

## 1.2 ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ç‡∏≠‡∏á Imperative Programming

### 1.2.1 Mutable State - ‡∏†‡∏±‡∏¢‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà

‡∏•‡∏≠‡∏á‡∏î‡∏π‡πÇ‡∏Ñ‡πâ‡∏î Traditional Imperative ‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ:

**Backend (C# ‡πÅ‡∏ö‡∏ö Imperative):**

```csharp
public async Task<Todo> GetTodo(int id)
{
    logger.LogInfo($"Getting todo {id}");

    var todo = await ctx.Todos.FindAsync(id);

    if (todo == null)
        throw new NotFoundException();

    logger.LogInfo($"Found todo {id}");

    return todo;
}
```

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠:**

1. **Hidden Side Effects** - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏°‡∏µ side effects ‡∏ó‡∏µ‡πà‡∏°‡∏≠‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏´‡πá‡∏ô (logging, database access)
2. **Exception Handling** - ‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≥‡∏ß‡πà‡∏≤‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏≠‡∏≤‡∏à‡πÇ‡∏¢‡∏ô exception
3. **Hard to Test** - ‡∏ï‡πâ‡∏≠‡∏á mock logger, DbContext, ‡πÅ‡∏•‡∏∞ setup database
4. **Tight Coupling** - ‡∏ú‡∏π‡∏Å‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ö infrastructure ‡πÄ‡∏â‡∏û‡∏≤‡∏∞ (ILogger, DbContext)

**Frontend (TypeScript ‡πÅ‡∏ö‡∏ö Imperative):**

```typescript
const [loading, setLoading] = useState(false);
const [error, setError] = useState(null);
const [data, setData] = useState(null);

const fetchTodos = async () => {
  setLoading(true);
  setError(null);

  try {
    const response = await fetch('/todos');
    const data = await response.json();
    setData(data);
  } catch (err) {
    setError(err);
  } finally {
    setLoading(false);
  }
};
```

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠:**

1. **Manual State Management** - ‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ state ‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏±‡∏ß ‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏∑‡∏≠
2. **Easy to Forget** - ‡∏•‡∏∑‡∏° `setLoading(false)` ‡πÉ‡∏ô catch block ‡∏ö‡πà‡∏≠‡∏¢‡πÜ
3. **Inconsistent State** - ‡∏≠‡∏≤‡∏à‡∏°‡∏µ‡∏ä‡πà‡∏ß‡∏á‡∏ó‡∏µ‡πà `loading=false` ‡πÅ‡∏ï‡πà `data=null` ‡πÅ‡∏•‡∏∞ `error=null`
4. **Repeated Code** - ‡∏ó‡∏∏‡∏Å API call ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ã‡πâ‡∏≥‡πÜ

### 1.2.2 ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö: Imperative vs Functional

| ‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞ | Imperative | Functional |
|--------|-----------|-----------|
| **State** | Mutable - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î‡πÄ‡∏ß‡∏•‡∏≤ | Immutable - ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á |
| **Side Effects** | ‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô | ‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô (Effects) |
| **‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô** | ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ß‡πà‡∏≤ "‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£" (How) | ‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏ß‡πà‡∏≤ "‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏∞‡πÑ‡∏£" (What) |
| **Error Handling** | Exceptions | Type-safe errors (Either, Fin) |
| **Testing** | ‡∏¢‡∏≤‡∏Å - ‡∏ï‡πâ‡∏≠‡∏á mock ‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á | ‡∏á‡πà‡∏≤‡∏¢ - Pure functions |
| **Composability** | ‡∏à‡∏≥‡∏Å‡∏±‡∏î | ‡∏¢‡∏≠‡∏î‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏° - ‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô LEGO |

---

## 1.3 ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ‡∏Ç‡∏≠‡∏á Functional Programming

### 1.3.1 ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡πÅ‡∏ö‡∏ö Functional

‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏≤‡∏î‡∏π‡πÇ‡∏Ñ‡πâ‡∏î‡πÅ‡∏ö‡∏ö Functional ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏Å‡∏±‡∏ô:

**Backend (C# + language-ext v5):**

```csharp
public static K<M, Todo> Get<M, RT>(int id)
    where M : Monad<M>, MonadIO<M>, Fallible<M>
    where RT : Has<M, DatabaseIO>, Has<M, LoggerIO>
{
    return
        from _ in Logger<M, RT>.logInfo("Getting todo by ID: {Id}", id)
        from todo in Database<M, RT>.liftIO((ctx, ct) =>
            ctx.Todos.AsNoTracking()
                .FirstOrDefaultAsync(t => t.Id == id, ct)
                .Map(Optional))
            .Bind(opt => opt.To<M, Todo>(() => Error.New(404, $"Todo with id {id} not found")))
        from __ in Logger<M, RT>.logInfo("Found todo: {TodoTitle}", todo.Title)
        select todo;
}
```

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:**

‚úÖ **Explicit Effects** - ‡πÄ‡∏´‡πá‡∏ô‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ DatabaseIO ‡πÅ‡∏•‡∏∞ LoggerIO
‚úÖ **Type-Safe Errors** - ‡∏Ñ‡∏≠‡∏°‡πÑ‡∏û‡πÄ‡∏•‡∏≠‡∏£‡πå‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ error
‚úÖ **Composable** - ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ï‡πà‡∏≠ operations ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏¥‡∏™‡∏£‡∏∞
‚úÖ **Testable** - ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà DatabaseIO, LoggerIO ‡∏î‡πâ‡∏ß‡∏¢ test implementations ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢
‚úÖ **Pure Business Logic** - logic ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡πÑ‡∏°‡πà‡∏õ‡∏∞‡∏õ‡∏ô‡∏Å‡∏±‡∏ö infrastructure

**Frontend (TypeScript + Effect-TS):**

```typescript
export const listTodos = (): App<Todo[]> =>
  Effect.gen(function* (_) {
    const client = yield* _(App.httpClient());
    return yield* _(client.get<Todo[]>('/todos'));
  }).pipe(
    withLogging(
      'Fetching all todos',
      todos => `Fetched ${todos.length} todos`
    )
  );

// ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô Component
const { state, refetch } = useAppQuery(env, listTodos(), []);
```

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:**

‚úÖ **Automatic State Management** - RemoteData pattern ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ loading/error/success ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
‚úÖ **Reusable Effects** - `withLogging()` ‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö operation ‡πÉ‡∏î‡∏Å‡πá‡πÑ‡∏î‡πâ
‚úÖ **Type-Safe** - TypeScript ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤ `state.data` ‡∏Ñ‡∏∑‡∏≠ `Todo[]` ‡πÄ‡∏°‡∏∑‡πà‡∏≠ success
‚úÖ **Declarative** - ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
‚úÖ **Composable** - ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏° retry, cache, metrics ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢

### 1.3.2 ‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á Functional Programming

#### 1. **Pure Functions** - ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏£‡∏¥‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πå

```typescript
// ‚ùå Impure - ‡∏°‡∏µ side effects
let counter = 0;
function increment() {
  counter++;  // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô state ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å
  return counter;
}

// ‚úÖ Pure - ‡πÑ‡∏°‡πà‡∏°‡∏µ side effects
function increment(counter: number): number {
  return counter + 1;  // return ‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏™‡∏°‡∏≠
}
```

**‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á Pure Function:**
- Input ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‚Üí Output ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡πÄ‡∏™‡∏°‡∏≠
- ‡πÑ‡∏°‡πà‡∏°‡∏µ side effects
- ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô state ‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å

#### 2. **Immutability** - ‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•

```csharp
// ‚ùå Mutable
var todo = new Todo { Title = "Buy milk" };
todo.Title = "Buy eggs";  // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡πà‡∏≤‡∏ï‡∏£‡∏á‡πÜ

// ‚úÖ Immutable (C# Records)
var todo = new Todo { Title = "Buy milk" };
var updated = todo with { Title = "Buy eggs" };  // ‡∏™‡∏£‡πâ‡∏≤‡∏á object ‡πÉ‡∏´‡∏°‡πà
```

#### 3. **Composition** - ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô

```csharp
// ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô:
var todo = GetTodo(id);
var validated = Validate(todo);
var saved = Save(validated);
var logged = Log(saved);

// ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö Functional:
var result =
    from todo in GetTodo(id)
    from validated in Validate(todo)
    from saved in Save(validated)
    from _ in Log(saved)
    select saved;
```

#### 4. **Type Safety** - ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö Type

```typescript
// ‚ùå Runtime Error
function divide(a, b) {
  return a / b;  // ‡∏ñ‡πâ‡∏≤ b = 0 ‡∏à‡∏∞‡πÑ‡∏î‡πâ Infinity
}

// ‚úÖ Type-Safe with Option
function divide(a: number, b: number): Option<number> {
  return b === 0
    ? Option.none()
    : Option.some(a / b);
}

// ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
divide(10, 2).match({
  some: (result) => console.log(result),  // 5
  none: () => console.log("Cannot divide by zero")
});
```

---

## 1.4 Application ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÄ‡∏•‡πà‡∏°‡∏ô‡∏µ‡πâ

### 1.4.1 ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏° Todo Application

‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á **Full-Stack Todo Application** ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ Functional Programming ‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏∞‡∏ö‡∏ö:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ     React + TypeScript + Effect-TS          ‚îÇ
‚îÇ              (Frontend)                      ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  ‚Ä¢ Effect system with Context.Tag           ‚îÇ
‚îÇ  ‚Ä¢ RemoteData pattern                       ‚îÇ
‚îÇ  ‚Ä¢ Type-safe API client                     ‚îÇ
‚îÇ  ‚Ä¢ Composable effects                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ HTTP (JSON)
               ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ASP.NET Core + C# + language-ext v5        ‚îÇ
‚îÇ               (Backend)                      ‚îÇ
‚îÇ                                             ‚îÇ
‚îÇ  ‚Ä¢ Has<M, RT, T>.ask pattern                ‚îÇ
‚îÇ  ‚Ä¢ Trait-based capabilities                 ‚îÇ
‚îÇ  ‚Ä¢ Type-safe error handling                 ‚îÇ
‚îÇ  ‚Ä¢ Testable architecture                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ    SQLite    ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 1.4.2 Features ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á

**Functional Features:**

1. ‚úÖ **CRUD Operations** - Create, Read, Update, Delete todos
2. ‚úÖ **Toggle Completion** - ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ completed/incomplete
3. ‚úÖ **Validation** - ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö Applicative (‡∏£‡∏ß‡∏° errors ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î)
4. ‚úÖ **Error Handling** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ errors ‡πÅ‡∏ö‡∏ö type-safe
5. ‚úÖ **Logging** - Structured logging ‡∏ó‡∏∏‡∏Å operation
6. ‚úÖ **Testing** - Unit tests ‡πÅ‡∏ö‡∏ö trait-based (‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ database ‡∏à‡∏£‡∏¥‡∏á!)

**Architecture Patterns:**

- **Backend**: Has<M, RT, T>.ask pattern, Trait-based capabilities
- **Frontend**: Effect system, Context.Tag, RemoteData pattern
- **Testing**: Dictionary/Map-based test implementations
- **Full-Stack**: Parallel functional patterns ‡∏ó‡∏±‡πâ‡∏á backend ‡πÅ‡∏•‡∏∞ frontend

### 1.4.3 Technology Stack

**Backend:**
- ASP.NET Core 8.0 - Web framework
- language-ext v5.0.0-beta-54 - Functional programming library
- Entity Framework Core 9.0 - ORM
- SQLite - Database

**Frontend:**
- React 18 - UI library
- TypeScript 5.2 - Type system
- Effect-TS 3.10 - Effect system
- Vite 5 - Build tool

**Testing:**
- Backend: NUnit + TestDatabaseIO (Dictionary-based)
- Frontend: Vitest + TestHttpClient (Map-based)

### 1.4.4 ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÄ‡∏•‡πà‡∏°‡∏ô‡∏µ‡πâ‡∏à‡∏ö ‡∏Ñ‡∏∏‡∏ì‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ:

**Backend:**
- ‚úÖ ‡πÉ‡∏ä‡πâ Has<M, RT, T>.ask pattern ‡∏™‡∏£‡πâ‡∏≤‡∏á capability-based architecture
- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á Trait interfaces ‡πÅ‡∏•‡∏∞ implementations
- ‚úÖ ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô generic business logic ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ú‡∏π‡∏Å‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ö infrastructure
- ‚úÖ ‡∏ó‡∏≥ Applicative validation ‡∏Å‡∏±‡∏ö error accumulation
- ‚úÖ Testing ‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ database ‡∏à‡∏£‡∏¥‡∏á

**Frontend:**
- ‚úÖ ‡πÉ‡∏ä‡πâ Effect-TS ‡∏™‡∏£‡πâ‡∏≤‡∏á effect system
- ‚úÖ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ dependency injection ‡∏î‡πâ‡∏ß‡∏¢ Context.Tag
- ‚úÖ ‡πÉ‡∏ä‡πâ RemoteData pattern ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ loading states
- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á type-safe API client
- ‚úÖ Testing ‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å HTTP ‡∏à‡∏£‡∏¥‡∏á

**Full-Stack:**
- ‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ backend ‡πÅ‡∏•‡∏∞ frontend ‡∏î‡πâ‡∏ß‡∏¢ functional patterns
- ‚úÖ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ errors ‡πÅ‡∏ö‡∏ö end-to-end
- ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á composable effects ‡∏ó‡∏µ‡πà reusable
- ‚úÖ Architecture ‡∏ó‡∏µ‡πà‡∏Ç‡∏¢‡∏≤‡∏¢‡∏á‡πà‡∏≤‡∏¢ (multi-entity)

---

## 1.5 ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö: Before ‡πÅ‡∏•‡∏∞ After

### Scenario: ‡∏™‡∏£‡πâ‡∏≤‡∏á Todo ‡πÉ‡∏´‡∏°‡πà

#### ‚ùå Before (Imperative)

**Backend:**
```csharp
public async Task<IActionResult> CreateTodo(CreateTodoRequest request)
{
    // Manual validation
    if (string.IsNullOrWhiteSpace(request.Title))
        return BadRequest("Title is required");

    if (request.Title.Length > 200)
        return BadRequest("Title too long");

    // Hidden side effects
    logger.LogInformation("Creating todo");

    var todo = new Todo
    {
        Title = request.Title,
        Description = request.Description,
        CreatedAt = DateTime.UtcNow
    };

    // Might throw exceptions
    await ctx.Todos.AddAsync(todo);
    await ctx.SaveChangesAsync();

    logger.LogInformation($"Created todo {todo.Id}");

    return Ok(todo);
}
```

**Frontend:**
```typescript
const [loading, setLoading] = useState(false);
const [error, setError] = useState<string | null>(null);
const [success, setSuccess] = useState(false);

const handleSubmit = async (e) => {
  e.preventDefault();

  // Manual validation
  if (!title) {
    setError("Title is required");
    return;
  }

  setLoading(true);
  setError(null);
  setSuccess(false);

  try {
    const response = await fetch('/todos', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ title, description })
    });

    if (!response.ok) {
      throw new Error('Failed to create todo');
    }

    const todo = await response.json();
    setSuccess(true);
    setTitle('');
    setDescription('');
  } catch (err) {
    setError(err.message);
  } finally {
    setLoading(false);
  }
};
```

**‡∏õ‡∏±‡∏ç‡∏´‡∏≤:**
- üî¥ State management ‡∏ó‡∏≥‡∏î‡πâ‡∏ß‡∏¢‡∏°‡∏∑‡∏≠ ‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô
- üî¥ Validation ‡∏Å‡∏£‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢
- üî¥ Error handling ‡πÑ‡∏°‡πà consistent
- üî¥ Logging ‡∏ó‡∏≥‡πÄ‡∏≠‡∏á ‡∏ó‡∏∏‡∏Å‡∏ó‡∏µ‡πà
- üî¥ Testing ‡∏¢‡∏≤‡∏Å ‡∏ï‡πâ‡∏≠‡∏á mock ‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á

#### ‚úÖ After (Functional)

**Backend:**
```csharp
public static K<M, Todo> Create<M, RT>(string title, string description)
    where M : Monad<M>, MonadIO<M>, Fallible<M>
    where RT : Has<M, DatabaseIO>, Has<M, LoggerIO>, Has<M, TimeIO>
{
    return
        from validReq in TodoValidation.Validate(title, description).To<M, CreateTodoRequest>()
        from now in Time<M, RT>.now()
        from todo in M.Pure(new Todo
        {
            Title = validReq.Title,
            Description = validReq.Description,
            CreatedAt = now
        })
        from _ in Logger<M, RT>.logInfo("Creating todo: {Title}", todo.Title)
        from saved in Database<M, RT>.addTodo(todo)
        from __ in Logger<M, RT>.logInfo("Created todo {TodoId}", saved.Id)
        select saved;
}
```

**Frontend:**
```typescript
export const createTodo = (request: CreateTodoRequest): App<Todo> =>
  Effect.gen(function* (_) {
    const client = yield* _(App.httpClient());
    return yield* _(client.post<CreateTodoRequest, Todo>('/todos', request));
  }).pipe(
    withLogging(
      `Creating todo: ${request.title}`,
      todo => `Created todo with ID: ${todo.id}`
    )
  );

// ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô Component
const { state, execute } = useApp<Todo>(env);

const handleSubmit = async (e: FormEvent) => {
  e.preventDefault();

  const validation = validateTodo({ title, description });

  if (Either.isLeft(validation)) {
    setErrors(validation.left);
    return;
  }

  await execute(createTodo(validation.right));
};
```

**‡∏Ç‡πâ‡∏≠‡∏î‡∏µ:**
- üü¢ State management ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥ (RemoteData pattern)
- üü¢ Validation ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏°‡∏≤ (Applicative)
- üü¢ Error handling type-safe ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- üü¢ Logging ‡πÄ‡∏õ‡πá‡∏ô composable effect
- üü¢ Testing ‡∏á‡πà‡∏≤‡∏¢ - ‡πÅ‡∏ó‡∏ô‡∏ó‡∏µ‡πà capabilities/services ‡πÑ‡∏î‡πâ

---

## 1.6 ‡∏™‡∏£‡∏∏‡∏õ

Functional Programming ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÅ‡∏Ñ‡πà "‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡πÉ‡∏´‡∏°‡πà" ‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡πá‡∏ô **‡πÅ‡∏ô‡∏ß‡∏ó‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏à‡∏£‡∏¥‡∏á** ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏í‡∏ô‡∏≤ software:

| ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ | ‡∏ß‡∏¥‡∏ò‡∏µ‡πÅ‡∏Å‡πâ‡πÅ‡∏ö‡∏ö FP |
|-------|---------------|
| **State ‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡πÄ‡∏î‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ** | Immutability + Pure Functions |
| **Side Effects ‡∏ó‡∏µ‡πà‡∏ã‡πà‡∏≠‡∏ô‡∏≠‡∏¢‡∏π‡πà** | Explicit Effects (Eff, Effect) |
| **Error Handling ‡πÑ‡∏°‡πà‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô** | Type-safe errors (Fin, Either) |
| **Testing ‡∏¢‡∏≤‡∏Å** | Trait/Context-based testing |
| **‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô** | Composition + Declarative style |
| **Reusability ‡∏ï‡πà‡∏≥** | Composable effects |

‡πÉ‡∏ô‡∏ö‡∏ó‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÄ‡∏à‡∏≤‡∏∞‡∏•‡∏∂‡∏Å‡πÑ‡∏õ‡∏ó‡∏µ‡πà **‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô Functional Programming** ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏π‡πâ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î!

---

## üìö ‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ó‡πâ‡∏≤‡∏¢‡∏ö‡∏ó

1. **‡∏Ñ‡∏¥‡∏î‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå**: ‡∏î‡∏π‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î ‡∏°‡∏µ Imperative patterns ‡∏ó‡∏µ‡πà‡∏Å‡πà‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á?

2. **‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö**: ‡∏•‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ö‡∏ß‡∏Å‡πÄ‡∏•‡∏Ç‡∏™‡∏≠‡∏á‡πÅ‡∏ö‡∏ö:
   - ‡πÅ‡∏ö‡∏ö Impure (‡∏°‡∏µ side effects)
   - ‡πÅ‡∏ö‡∏ö Pure (‡πÑ‡∏°‡πà‡∏°‡∏µ side effects)

3. **‡∏≠‡∏†‡∏¥‡∏õ‡∏£‡∏≤‡∏¢**: ‡∏ó‡∏≥‡πÑ‡∏° Pure Functions ‡∏ñ‡∏∂‡∏á test ‡∏á‡πà‡∏≤‡∏¢‡∏Å‡∏ß‡πà‡∏≤ Impure Functions?

4. **‡∏•‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î**: ‡∏ñ‡πâ‡∏≤ state ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏õ‡πá‡∏ô Immutable ‡∏à‡∏∞‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏±‡∏ö performance ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£? ‡∏Ç‡πâ‡∏≠‡∏î‡∏µ-‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏µ‡∏¢‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?

---

**‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÉ‡∏ä‡πâ:
- **C# + language-ext v5** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Backend
- **TypeScript + Effect-TS** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Frontend
- **SQLite** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Database
- **React 18** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö UI

‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÑ‡∏õ‡∏ö‡∏ó‡∏ñ‡∏±‡∏î‡πÑ‡∏õ‡∏Å‡∏±‡∏ô‡πÑ‡∏´‡∏°? üöÄ
